---
import Layout from "../components/Layout.astro";
import { getCollection } from "astro:content";

const email = "donniepclark@gmail.com";
const city = "Reno, NV";

// Blog posts (most recent first)
const posts = (await getCollection("blog", ({ data }) => !data.draft)).sort(
  (a, b) => new Date(b.data.date ?? 0).getTime() - new Date(a.data.date ?? 0).getTime()
);

const formatDate = (d: unknown) => {
  const dt = d instanceof Date ? d : typeof d === "string" ? new Date(d) : null;
  return dt && Number.isFinite(dt.getTime()) ? dt.toLocaleDateString() : "";
};
---

<Layout
  title="Donald Clark — IT Support & Computer Repairs"
  description="Hardware diagnostics, upgrades, Windows/Linux installs, and clear documentation."
>
  <!-- HERO / BIO -->
  <section class="not-prose mb-10">
    <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
      <p class="text-sm font-medium text-indigo-600">Welcome</p>

      <h1 class="mt-2 text-4xl font-extrabold tracking-tight text-slate-900">
        Donald Clark
      </h1>

      <div class="mt-3 flex flex-wrap items-center gap-3 text-slate-700">
        <span class="font-semibold">IT Support / Computer Repair</span>
        <span class="rounded-full bg-slate-100 px-2 py-0.5 text-sm text-slate-700">
          {city}
        </span>
        <a
          class="text-sm underline decoration-indigo-300 underline-offset-4 hover:decoration-indigo-500"
          href={`mailto:${email}`}
        >
          {email}
        </a>
      </div>

      <p class="mt-5 max-w-3xl text-slate-700">
      Welcome! I am an aspiring IT professional with hand-on experience in PC repair, hardware diagnostics, and Windows troubleshooting.
      Most experience has been done at home with my personal computer as well as VM labs I have found online. Currently working on my A+ studies which should be complete by June on this year, at which point I will begin work on Network+ and Security+. Long term goal is to grow a strong IT systems and support technician where I can combine technical skills with strong organization and process improvement.
      </p>

      <div class="mt-6 flex flex-wrap gap-2">
        <span class="rounded-full bg-slate-100 px-3 py-1 text-sm text-slate-700">Hardware diagnostics</span>
        <span class="rounded-full bg-slate-100 px-3 py-1 text-sm text-slate-700">Windows / Linux</span>
        <span class="rounded-full bg-slate-100 px-3 py-1 text-sm text-slate-700">Networking basics</span>
        <span class="rounded-full bg-slate-100 px-3 py-1 text-sm text-slate-700">C# / Unity</span>
      </div>
    </div>
  </section>

  <!-- COMMON LINKS -->
  <section class="not-prose mb-10">
    <h2 class="text-sm font-semibold text-slate-700">Common Links</h2>

    <div class="mt-3 grid gap-4 md:grid-cols-3">
      <!-- Blog card -->
      <a
        href="/blog/"
        class="group block rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-indigo-200 hover:shadow-md"
      >
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold text-slate-900">Blog</h3>
          <span class="text-slate-400 transition group-hover:text-indigo-500">→</span>
        </div>
        <p class="mt-2 text-sm text-slate-600">
          Troubleshooting notes, project logs, and what I’m learning.
        </p>
      </a>

      <!-- Resume card -->
      <a
        href="/resume/"
        class="group block rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-indigo-200 hover:shadow-md"
      >
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold text-slate-900">Resume</h3>
          <span class="text-slate-400 transition group-hover:text-indigo-500">→</span>
        </div>
        <p class="mt-2 text-sm text-slate-600">
          Experience, technical skills, and certifications in progress.
        </p>
      </a>

      <!-- Contact card -->
      <a
        href="/contact/"
        class="group block rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-indigo-200 hover:shadow-md"
      >
        <div class="flex items-start justify-between">
          <h3 class="text-lg font-semibold text-slate-900">Contact</h3>
          <span class="text-slate-400 transition group-hover:text-indigo-500">→</span>
        </div>
        <p class="mt-2 text-sm text-slate-600">
          Reach me by email for PC repair, troubleshooting, or opportunities.
        </p>
        <p class="mt-3 text-sm font-medium text-indigo-600">{email}</p>
      </a>
    </div>
  </section>

  <!-- RECENT POSTS -->
  <section class="not-prose">
    <div class="flex items-end justify-between gap-3">
      <div>
        <h2 class="text-xl font-bold text-slate-900">Recent Posts</h2>
        <p class="mt-1 text-sm text-slate-600">
          Sorted newest to oldest.
        </p>
      </div>
      <a class="text-sm font-medium text-indigo-600 hover:underline" href="/blog/">
        View all →
      </a>
    </div>

    <div class="mt-4 grid gap-4 md:grid-cols-2">
      {posts.map((p) => (
        <a
          href={`/blog/${p.slug}/`}
          class="block rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-indigo-200 hover:shadow-md"
        >
          <div class="flex items-start justify-between gap-3">
            <h3 class="text-lg font-semibold text-slate-900">
              {p.data.title ?? p.slug}
            </h3>
            {p.data.date && (
              <span class="whitespace-nowrap text-xs text-slate-500">
                {formatDate(p.data.date)}
              </span>
            )}
          </div>

          <p class="mt-2 text-sm text-slate-600">
            {p.data.summary ?? "No summary yet."}
          </p>

          <div class="mt-4 text-sm font-medium text-indigo-600">Read →</div>
        </a>
      ))}
    </div>
  </section>
</Layout>
